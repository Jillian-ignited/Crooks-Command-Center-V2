<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üëë Crooks & Castles Command Center V2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
            font-family: 'Arial', sans-serif;
        }
        .gradient-border {
            background: linear-gradient(45deg, #ff6b35, #f7931e, #ffcc02);
            padding: 2px;
            border-radius: 12px;
        }
        .gradient-border-content {
            background: #1a1a1a;
            border-radius: 10px;
            padding: 1.5rem;
        }
        .crown-glow {
            text-shadow: 0 0 20px #ff6b35;
        }
        .stat-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border: 1px solid #ff6b35;
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
        }
        .upload-zone {
            border: 2px dashed #ff6b35;
            background: rgba(255, 107, 53, 0.1);
            transition: all 0.3s ease;
        }
        .upload-zone:hover {
            background: rgba(255, 107, 53, 0.2);
            border-color: #f7931e;
        }
    </style>
</head>
<body class="bg-black text-white min-h-screen">
    <!-- Header -->
    <header class="p-6 border-b border-gray-800">
        <div class="flex justify-between items-center">
            <h1 class="text-4xl font-bold text-orange-500 crown-glow">üëë Crooks & Castles Command Center</h1>
            <div class="flex space-x-6">
                <button onclick="showTab('dashboard')" id="tab-dashboard" class="tab-btn text-lg font-semibold text-orange-500 border-b-2 border-orange-500">Dashboard</button>
                <button onclick="showTab('intelligence')" id="tab-intelligence" class="tab-btn text-lg font-semibold text-gray-300 hover:text-orange-500">Intelligence</button>
                <button onclick="showTab('ingest')" id="tab-ingest" class="tab-btn text-lg font-semibold text-gray-300 hover:text-orange-500">Data Ingest</button>
                <button onclick="showTab('calendar')" id="tab-calendar" class="tab-btn text-lg font-semibold text-gray-300 hover:text-orange-500">Calendar</button>
                <button onclick="showTab('agency')" id="tab-agency" class="tab-btn text-lg font-semibold text-gray-300 hover:text-orange-500">Agency</button>
            </div>
        </div>
    </header>

    <!-- Dashboard Tab -->
    <div id="dashboard-content" class="tab-content p-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Stats Cards -->
            <div class="stat-card p-6 rounded-lg">
                <h3 class="text-xl font-semibold mb-2 text-orange-400">Total Brands</h3>
                <p class="text-4xl font-bold" id="total-brands">16</p>
                <p class="text-sm text-gray-400 mt-2">Competitors Tracked</p>
            </div>
            <div class="stat-card p-6 rounded-lg">
                <h3 class="text-xl font-semibold mb-2 text-orange-400">Total Posts</h3>
                <p class="text-4xl font-bold" id="total-posts">557</p>
                <p class="text-sm text-gray-400 mt-2">Social Media Posts</p>
            </div>
            <div class="stat-card p-6 rounded-lg">
                <h3 class="text-xl font-semibold mb-2 text-orange-400">Positive Sentiment</h3>
                <p class="text-4xl font-bold text-green-400" id="sentiment">89.7%</p>
                <p class="text-sm text-gray-400 mt-2">Overall Market Mood</p>
            </div>
            <div class="stat-card p-6 rounded-lg">
                <h3 class="text-xl font-semibold mb-2 text-orange-400">C&C Rank</h3>
                <p class="text-4xl font-bold text-yellow-400" id="cc-rank">#10</p>
                <p class="text-sm text-gray-400 mt-2">Market Position</p>
            </div>
        </div>

        <!-- Executive Summary -->
        <div class="gradient-border mb-8">
            <div class="gradient-border-content">
                <h2 class="text-2xl font-bold mb-4 text-orange-500">üëë Executive Summary</h2>
                <div id="executive-summary" class="space-y-4">
                    <p class="text-lg">Crooks & Castles maintains strong brand recognition in the streetwear market with <span class="text-orange-400 font-bold">89.7% positive sentiment</span> across social platforms.</p>
                    <p>Key competitors showing momentum: Supreme, Off-White, and Fear of God. Opportunity identified in <span class="text-green-400 font-bold">cultural collaboration</span> space.</p>
                    <p>Trending hashtags: <span class="text-blue-400">#streetwear #hypebeast #crooksandcastles #streetstyle</span></p>
                </div>
            </div>
        </div>

        <!-- Trending Hashtags -->
        <div class="gradient-border">
            <div class="gradient-border-content">
                <h2 class="text-2xl font-bold mb-4 text-orange-500">üî• Trending Now</h2>
                <div class="flex flex-wrap gap-3" id="trending-hashtags">
                    <span class="bg-orange-500 text-black px-3 py-1 rounded-full font-semibold">#streetwear</span>
                    <span class="bg-gray-700 text-white px-3 py-1 rounded-full">#hypebeast</span>
                    <span class="bg-gray-700 text-white px-3 py-1 rounded-full">#crooksandcastles</span>
                    <span class="bg-gray-700 text-white px-3 py-1 rounded-full">#streetstyle</span>
                    <span class="bg-gray-700 text-white px-3 py-1 rounded-full">#fashion</span>
                    <span class="bg-gray-700 text-white px-3 py-1 rounded-full">#urban</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Intelligence Tab -->
    <div id="intelligence-content" class="tab-content p-8 hidden">
        <div class="gradient-border mb-8">
            <div class="gradient-border-content">
                <h2 class="text-2xl font-bold mb-4 text-orange-500">üß† Competitive Intelligence</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-xl font-semibold mb-3 text-orange-400">Top Competitors</h3>
                        <div class="space-y-3" id="competitor-list">
                            <div class="flex justify-between items-center p-3 bg-gray-800 rounded">
                                <span class="font-semibold">Supreme</span>
                                <span class="text-green-400">‚Üó +15%</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-800 rounded">
                                <span class="font-semibold">Off-White</span>
                                <span class="text-green-400">‚Üó +12%</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-800 rounded">
                                <span class="font-semibold">Fear of God</span>
                                <span class="text-yellow-400">‚Üí +3%</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-800 rounded border border-orange-500">
                                <span class="font-semibold text-orange-400">Crooks & Castles</span>
                                <span class="text-orange-400">#10</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-3 text-orange-400">Strategic Insights</h3>
                        <div class="space-y-3">
                            <div class="p-3 bg-blue-900 rounded border-l-4 border-blue-400">
                                <p class="font-semibold">Opportunity: Cultural Collaborations</p>
                                <p class="text-sm text-gray-300">Hip-hop partnerships showing 40% higher engagement</p>
                            </div>
                            <div class="p-3 bg-green-900 rounded border-l-4 border-green-400">
                                <p class="font-semibold">Strength: Authentic Street Credibility</p>
                                <p class="text-sm text-gray-300">89.7% positive sentiment in community discussions</p>
                            </div>
                            <div class="p-3 bg-yellow-900 rounded border-l-4 border-yellow-400">
                                <p class="font-semibold">Watch: Emerging Competitors</p>
                                <p class="text-sm text-gray-300">3 new brands gaining traction in streetwear space</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Data Ingest Tab -->
    <div id="ingest-content" class="tab-content p-8 hidden">
        <div class="gradient-border mb-8">
            <div class="gradient-border-content">
                <h2 class="text-2xl font-bold mb-4 text-orange-500">‚¨ÜÔ∏è Manual Data Ingest</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- File Upload -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-orange-400">Upload Data File</h3>
                        <div class="upload-zone p-8 rounded-lg text-center">
                            <div class="mb-4">
                                <svg class="mx-auto h-12 w-12 text-orange-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </div>
                            <p class="text-lg font-semibold mb-2">Drop files here or click to upload</p>
                            <p class="text-gray-400 mb-4">Supports JSON, JSONL, CSV formats</p>
                            <input type="file" id="file-upload" class="hidden" accept=".json,.jsonl,.csv" onchange="handleFileUpload(event)">
                            <button onclick="document.getElementById('file-upload').click()" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                                Choose File
                            </button>
                        </div>
                    </div>

                    <!-- JSON Paste -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-orange-400">Paste JSON Data</h3>
                        <textarea id="json-paste" class="w-full h-40 bg-gray-800 border border-gray-600 rounded-lg p-4 text-white" placeholder='{"items": [{"brand": "Supreme", "engagement": 1250, "sentiment": "positive"}, ...]}'></textarea>
                        <button onclick="handleJsonPaste()" class="mt-4 w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                            Process JSON Data
                        </button>
                    </div>
                </div>

                <!-- Processing Status -->
                <div id="processing-status" class="mt-8 hidden">
                    <div class="bg-blue-900 border border-blue-400 rounded-lg p-4">
                        <div class="flex items-center">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400 mr-3"></div>
                            <span class="text-blue-400 font-semibold">Processing data...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Health -->
        <div class="gradient-border">
            <div class="gradient-border-content">
                <h2 class="text-2xl font-bold mb-4 text-orange-500">üîß System Health</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="flex items-center justify-between p-4 bg-gray-800 rounded-lg">
                        <span class="font-semibold">API Status</span>
                        <span class="flex items-center text-green-400">
                            <span class="w-3 h-3 bg-green-400 rounded-full mr-2"></span>
                            Online
                        </span>
                    </div>
                    <div class="flex items-center justify-between p-4 bg-gray-800 rounded-lg">
                        <span class="font-semibold">Database</span>
                        <span class="flex items-center text-green-400">
                            <span class="w-3 h-3 bg-green-400 rounded-full mr-2"></span>
                            Connected
                        </span>
                    </div>
                    <div class="flex items-center justify-between p-4 bg-gray-800 rounded-lg">
                        <span class="font-semibold">Last Update</span>
                        <span class="text-gray-400">Just now</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Calendar Tab -->
    <div id="calendar-content" class="tab-content p-8 hidden">
        <div class="gradient-border">
            <div class="gradient-border-content">
                <h2 class="text-2xl font-bold mb-4 text-orange-500">üìÖ Content Calendar</h2>
                <p class="text-gray-300 text-lg">Strategic content planning and cultural moment tracking coming soon...</p>
            </div>
        </div>
    </div>

    <!-- Agency Tab -->
    <div id="agency-content" class="tab-content p-8 hidden">
        <div class="gradient-border">
            <div class="gradient-border-content">
                <h2 class="text-2xl font-bold mb-4 text-orange-500">ü§ù Agency Partnership</h2>
                <p class="text-gray-300 text-lg">HVD partnership tracking and deliverables management coming soon...</p>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active styling from all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('text-orange-500', 'border-b-2', 'border-orange-500');
                btn.classList.add('text-gray-300');
            });
            
            // Show selected tab content
            document.getElementById(tabName + '-content').classList.remove('hidden');
            
            // Add active styling to selected tab
            const activeTab = document.getElementById('tab-' + tabName);
            activeTab.classList.remove('text-gray-300');
            activeTab.classList.add('text-orange-500', 'border-b-2', 'border-orange-500');
            
            // Load data for specific tabs
            if (tabName === 'dashboard') {
                loadDashboardData();
            } else if (tabName === 'intelligence') {
                loadIntelligenceData();
            }
        }

        // Load dashboard data
        async function loadDashboardData() {
            try {
                const response = await fetch('/summary/overview');
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('total-brands').textContent = data.total_brands || '16';
                    document.getElementById('total-posts').textContent = data.total_posts || '557';
                    document.getElementById('sentiment').textContent = (data.positive_sentiment || 89.7) + '%';
                    document.getElementById('cc-rank').textContent = '#' + (data.cc_rank || '10');
                }
            } catch (error) {
                console.log('Using default dashboard data');
            }
        }

        // Load intelligence data
        async function loadIntelligenceData() {
            try {
                const response = await fetch('/intelligence/competitors');
                if (response.ok) {
                    const data = await response.json();
                    // Update competitor list with real data
                    console.log('Intelligence data loaded:', data);
                }
            } catch (error) {
                console.log('Using default intelligence data');
            }
        }

        // File upload handler
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const formData = new FormData();
                formData.append('file', file);
                formData.append('source', 'manual_upload');
                
                document.getElementById('processing-status').classList.remove('hidden');
                
                fetch('/ingest/upload', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('processing-status').classList.add('hidden');
                    alert('File uploaded successfully! Processed ' + data.records_processed + ' records.');
                    loadDashboardData(); // Refresh dashboard
                })
                .catch(error => {
                    document.getElementById('processing-status').classList.add('hidden');
                    alert('Upload failed: ' + error.message);
                });
            }
        }

        // JSON paste handler
        function handleJsonPaste() {
            const jsonData = document.getElementById('json-paste').value;
            if (jsonData.trim()) {
                try {
                    const parsedData = JSON.parse(jsonData);
                    
                    document.getElementById('processing-status').classList.remove('hidden');
                    
                    fetch('/ingest/paste', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(parsedData)
                    })
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('processing-status').classList.add('hidden');
                        alert('JSON data processed successfully! Processed ' + data.records_processed + ' records.');
                        document.getElementById('json-paste').value = '';
                        loadDashboardData(); // Refresh dashboard
                    })
                    .catch(error => {
                        document.getElementById('processing-status').classList.add('hidden');
                        alert('Processing failed: ' + error.message);
                    });
                } catch (error) {
                    alert('Invalid JSON format. Please check your data.');
                }
            }
        }

        // Initialize dashboard on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
        });
    </script>
</body>
</html>
