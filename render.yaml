

services:
  - type: web
    name: crooks-command-center-v2
    env: python
    buildCommand: |
      # Install dependencies
      pip install -r requirements.txt
      
      # Install database setup dependencies
      pip install sqlalchemy psycopg2-binary
      
      # Run database setup to create missing tables
      echo "🛠️  Creating missing database tables..."
      cd backend/setup && python create_database_tables.py && cd ../..
      
      echo "✅ Build completed with database setup!"
    
    startCommand: "cd backend && python main.py"
    
    # Your existing environment variables
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: your-database-name
          property: connectionString
