
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crooks & Castles Command Center V2</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            min-height: 100vh;
        }
        .header {
            background: rgba(0,0,0,0.2);
            padding: 1rem;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        .header p {
            opacity: 0.8;
            font-size: 1.1rem;
        }
        .nav-tabs {
            display: flex;
            background: rgba(0,0,0,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .nav-tab {
            flex: 1;
            padding: 1rem;
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            border-bottom: 3px solid transparent;
        }
        .nav-tab:hover {
            background: rgba(255,255,255,0.1);
        }
        .nav-tab.active {
            background: rgba(255,255,255,0.2);
            border-bottom-color: #ff6b6b;
        }
        .content {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .metric-card {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 0.5rem;
        }
        .metric-label {
            opacity: 0.8;
            font-size: 0.9rem;
        }
        .section {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .section h3 {
            margin-bottom: 1rem;
            color: #ff6b6b;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .hashtag-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .hashtag {
            background: rgba(255,107,107,0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid rgba(255,107,107,0.3);
        }
        .competitor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }
        .competitor-card {
            background: rgba(255,255,255,0.05);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .competitor-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #ff6b6b;
        }
        .competitor-stats {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        .calendar-controls {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .calendar-btn {
            padding: 0.5rem 1rem;
            background: rgba(255,107,107,0.2);
            border: 1px solid rgba(255,107,107,0.3);
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .calendar-btn:hover, .calendar-btn.active {
            background: rgba(255,107,107,0.4);
        }
        .campaign-card {
            background: rgba(255,255,255,0.05);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid #ff6b6b;
        }
        .campaign-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #ff6b6b;
        }
        .campaign-details {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        .loading {
            text-align: center;
            padding: 2rem;
            opacity: 0.7;
        }
        .error {
            color: #ff6b6b;
            text-align: center;
            padding: 1rem;
        }
        .priority-action {
            background: rgba(255,107,107,0.1);
            border-left: 4px solid #ff6b6b;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 8px 8px 0;
        }
        .priority-title {
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 0.5rem;
        }
        .recommendation {
            background: rgba(255,107,107,0.1);
            border-left: 4px solid #ff6b6b;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 8px 8px 0;
        }
        .recommendation-title {
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üè∞ Crooks & Castles Command Center V2</h1>
        <p>Advanced Competitive Intelligence & Content Planning Platform</p>
    </div>
    
    <div class="nav-tabs">
        <button class="nav-tab active" onclick="showTab(\'overview\')">üìä Overview</button>
        <button class="nav-tab" onclick="showTab(\'intelligence\')">üéØ Intelligence</button>
        <button class="nav-tab" onclick="showTab(\'assets\')">üìÅ Assets</button>
        <button class="nav-tab" onclick="showTab(\'calendar\')">üìÖ Calendar</button>
        <button class="nav-tab" onclick="showTab(\'agency\')">üè¢ Agency</button>
    </div>
    
    <div class="content">
        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <h2>Executive Overview Dashboard</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="data-sources">-</div>
                    <div class="metric-label">Data Sources</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="trust-score">-</div>
                    <div class="metric-label">Trustworthiness Score</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="total-assets">-</div>
                    <div class="metric-label">Total Assets</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="upcoming-events">-</div>
                    <div class="metric-label">Upcoming Events</div>
                </div>
            </div>
            
            <div class="section">
                <h3>üìä Executive Summary</h3>
                <div id="executive-summary">Loading executive insights...</div>
            </div>
            
            <div class="section">
                <h3>üéØ Priority Actions</h3>
                <div id="priority-actions">Loading priority actions...</div>
            </div>
        </div>
        
        <!-- Intelligence Tab -->
        <div id="intelligence" class="tab-content">
            <h2>Competitive Intelligence</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="posts-analyzed">-</div>
                    <div class="metric-label">Posts Analyzed</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="sentiment-analyzed">-</div>
                    <div class="metric-label">Sentiment Analyzed</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="positive-sentiment">-</div>
                    <div class="metric-label">Positive Sentiment</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="trends-tracked">-</div>
                    <div class="metric-label">Trends Tracked</div>
                </div>
            </div>
            
            <div class="section">
                <h3>üî• Top Trending Hashtags</h3>
                <div class="hashtag-list" id="trending-hashtags">Loading hashtags...</div>
            </div>
            
            <div class="section">
                <h3>üí° Strategic Recommendations</h3>
                <div id="strategic-recommendations">Loading recommendations...</div>
            </div>
            
            <div class="section">
                <h3>üèÜ Competitor Analysis</h3>
                <div id="competitor-analysis">Loading competitor data...</div>
            </div>
        </div>
        
        <!-- Assets Tab -->
        <div id="assets" class="tab-content">
            <h2>Asset Management</h2>
            <div id="asset-content">Loading assets...</div>
        </div>
        
        <!-- Calendar Tab -->
        <div id="calendar" class="tab-content">
            <h2>Strategic Calendar</h2>
            <div class="calendar-controls">
                <button class="calendar-btn active" onclick="loadCalendar(\'7\')">7 Days</button>
                <button class="calendar-btn" onclick="loadCalendar(\'30\')">30 Days</button>
                <button class="calendar-btn" onclick="loadCalendar(\'60\')">60 Days</button>
                <button class="calendar-btn" onclick="loadCalendar(\'90\')">90+ Days</button>
            </div>
            <div id="calendar-content">Loading calendar...</div>
        </div>
        
        <!-- Agency Tab -->
        <div id="agency" class="tab-content">
            <h2>Agency Workflow</h2>
            <div id="agency-content">Loading agency data...</div>
        </div>
    </div>
    
    <script>
        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll(".tab-content").forEach(tab => {
                tab.classList.remove("active");
            });
            document.querySelectorAll(".nav-tab").forEach(tab => {
                tab.classList.remove("active");
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add("active");
            event.target.classList.add("active");
            
            // Load tab content
            loadTabContent(tabName);
        }
        
        // Load tab content
        function loadTabContent(tabName) {
            switch(tabName) {
                case "overview":
                    loadOverview();
                    break;
                case "intelligence":
                    loadIntelligence();
                    break;
                case "assets":
                    loadAssets();
                    break;
                case "calendar":
                    loadCalendar("7");
                    break;
                case "agency":
                    loadAgency();
                    break;
            }
        }
        
        // Load overview data
        function loadOverview() {
            fetch("/api/overview")
                .then(response => response.json())
                .then(data => {
                    document.getElementById("data-sources").textContent = data.data_sources || "0";
                    document.getElementById("trust-score").textContent = (data.trust_score || "0") + "%";
                    document.getElementById("total-assets").textContent = data.total_assets || "0";
                    document.getElementById("upcoming-events").textContent = data.upcoming_events || "0";
                    
                    // Executive summary
                    const summary = data.executive_summary || {};
                    document.getElementById("executive-summary").innerHTML = `
                        <p><strong>Intelligence Status:</strong> ${summary.intelligence_status || "Processing data sources"}</p>
                        <p><strong>Asset Management:</strong> ${summary.asset_status || "Managing assets"}</p>
                        <p><strong>Strategic Planning:</strong> ${summary.planning_status || "Planning in progress"}</p>
                        <p><strong>Agency Partnership:</strong> ${summary.agency_status || "Partnership active"}</p>
                    `;
                    
                    // Priority actions
                    const actions = data.priority_actions || [];
                    document.getElementById("priority-actions").innerHTML = actions.map(action => `
                        <div class="priority-action">
                            <div class="priority-title">${action.title || "Action Item"}</div>
                            <div>${action.description || "No description available"}</div>
                        </div>
                    `).join("");
                })
                .catch(error => {
                    console.error("Error loading overview:", error);
                    document.getElementById("executive-summary").innerHTML = ".error{">Error loading overview data</div>";
                });
        }
        
        // Load intelligence data
        function loadIntelligence() {
            fetch("/api/intelligence")
                .then(response => response.json())
                .then(data => {
                    document.getElementById("posts-analyzed").textContent = data.posts_analyzed || "0";
                    document.getElementById("sentiment-analyzed").textContent = data.sentiment_analyzed || "0";
                    document.getElementById("positive-sentiment").textContent = (data.positive_sentiment || "0") + "%";
                    document.getElementById("trends-tracked").textContent = data.trends_tracked || "0";
                    
                    // Trending hashtags
                    const hashtags = data.trending_hashtags || [];
                    document.getElementById("trending-hashtags").innerHTML = hashtags.map(tag => 
                        `<span class="hashtag">${tag.hashtag || tag} <small>(${tag.count || ""})</small></span>`
                    ).join("");
                    
                    // Strategic recommendations
                    const recommendations = data.strategic_recommendations || [];
                    document.getElementById("strategic-recommendations").innerHTML = recommendations.map(rec => `
                        <div class="recommendation">
                            <div class="recommendation-title">${rec.title || rec.type || "Recommendation"}</div>
                            <div>${rec.description || rec.insight || "No details available"}</div>
                        </div>
                    `).join("");
                })
                .catch(error => {
                    console.error("Error loading intelligence:", error);
                });
            
            // Load competitor analysis
            fetch("/api/intelligence/competitors")
                .then(response => response.json())
                .then(data => {
                    const competitors = data.competitors || [];
                    document.getElementById("competitor-analysis").innerHTML = `
                        <p>Tracking <strong>${competitors.length}</strong> brands across <strong>${data.total_posts || 0}</strong> posts</p>
                        <div class="competitor-grid">
                            ${competitors.map(comp => `
                                <div class="competitor-card">
                                    <div class="competitor-name">${comp.name || "Unknown Brand"}</div>
                                    <div class="competitor-stats">
                                        Posts: ${comp.posts || 0}<br>
                                        Avg Engagement: ${comp.avg_engagement || 0}<br>
                                        Sentiment: ${comp.avg_sentiment || 0}
                                    </div>
                                </div>
                            `).join("")}
                        </div>
                    `;
                })
                .catch(error => {
                    console.error("Error loading competitors:", error);
                    document.getElementById("competitor-analysis").innerHTML = ".error{">Error loading competitor data</div>";
                });
        }
        
        // Load assets
        function loadAssets() {
            fetch("/api/assets")
                .then(response => response.json())
                .then(data => {
                    document.getElementById("asset-content").innerHTML = `
                        <div class="section">
                            <h3>üìä Data Assets</h3>
                            <p>Total Files: ${data.data_assets?.length || 0}</p>
                            <p>Total Records: ${data.total_records || 0}</p>
                        </div>
                        <div class="section">
                            <h3>üé® Media Assets</h3>
                            <p>Total Files: ${data.media_assets?.length || 0}</p>
                        </div>
                    `
        });
    </script>
</body>
</html>
    
