<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Cache-Control" content="no-store" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CROOKS & CASTLES — COMMAND CENTER V2</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <style>
    :root{
      --crooks-primary:#ff6b35; /* orange */
      --crooks-secondary:#1a1a1a; /* bg */
      --crooks-accent:#ffd700; /* gold */
      --crooks-dark:#0d0d0d;
      --crooks-light:#f5f5f5;
      --crooks-success:#28a745;
      --muted:#808080;
      --card:#121212;
      --border:#2a2a2a;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--crooks-secondary);color:var(--crooks-light);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    header{display:flex;align-items:center;gap:16px;padding:18px 20px;border-bottom:1px solid var(--border);background:linear-gradient(180deg,#0d0d0d,#111)}
    header .brand{font-weight:800;letter-spacing:.12em}
    header .brand span{color:var(--crooks-primary)}
    .wrap{max-width:1200px;margin:0 auto;padding:18px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0 18px}
    .tabs button{border:1px solid var(--border);background:var(--card);color:var(--crooks-light);padding:10px 14px;border-radius:10px;cursor:pointer}
    .tabs button.active{border-color:var(--crooks-primary);box-shadow:0 0 0 1px var(--crooks-primary) inset}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px}
    .card h3{margin:0 0 10px 0;font-size:14px;letter-spacing:.08em;color:#fff}
    .meta{color:var(--muted);font-size:12px}
    .two{grid-column:span 6}
    .three{grid-column:span 4}
    .full{grid-column:1/-1}
    .pill{display:inline-block;border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:12px;margin:2px}
    .asset-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px}
    .asset{background:#0f0f0f;border:1px solid var(--border);border-radius:12px;padding:10px}
    .asset .thumb{width:100%;aspect-ratio:1/1;background:#111;border:1px solid #222;border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .asset .thumb img{width:100%;height:100%;object-fit:cover}
    .kbar{display:flex;gap:10px;flex-wrap:wrap;margin:6px 0 8px}
    .kbar .kpi{background:#101010;border:1px solid var(--border);padding:10px 12px;border-radius:10px}
    .view-switch{display:flex;gap:8px;flex-wrap:wrap}
    .view-switch button{border:1px solid var(--border);background:#0e0e0e;color:#fff;padding:8px 12px;border-radius:999px;cursor:pointer}
    .view-switch button.active{border-color:var(--crooks-accent);color:var(--crooks-accent)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .muted{color:var(--muted)}
    .ok{color:var(--crooks-success)}
    .err{color:#ff4d4f}
    .hidden{display:none}
    .upload{border:1px dashed var(--border);background:#0e0e0e;padding:16px;border-radius:14px;text-align:center}
    .upload.drag{border-color:var(--crooks-primary);background:rgba(255,107,53,.05)}
    .progress{height:8px;background:#1b1b1b;border-radius:6px;overflow:hidden;border:1px solid var(--border)}
    .progress>span{display:block;height:100%;width:0;background:var(--crooks-primary)}
    a.btn{display:inline-flex;gap:8px;align-items:center;background:#111;border:1px solid var(--border);padding:8px 12px;border-radius:10px;text-decoration:none;color:#fff}
    a.btn:hover{border-color:var(--crooks-primary)}
    code,pre{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
  </style>
</head>
<body>
  <header>
    <div class="brand">CROOKS <span>&</span> CASTLES — COMMAND CENTER</div>
    <span class="pill">V2</span>
    <span class="pill">LIVE</span>
  </header>

  <div class="wrap">
    <div class="tabs">
      <button class="active" data-tab="intel">INTELLIGENCE</button>
      <button data-tab="assets">ASSETS</button>
      <button data-tab="calendar">CALENDAR</button>
      <button data-tab="agency">AGENCY</button>
      <button data-tab="upload">UPLOAD</button>
      <span class="muted">Status: <span id="app-status" class="ok">connected</span></span>
    </div>

    <!-- INTELLIGENCE -->
    <section id="tab-intel" class="grid">
      <div class="two card">
        <h3>OVERVIEW</h3>
        <div id="intel-overview" class="kbar"></div>
        <div class="meta">Data source: Instagram/TikTok JSONL + competitor scan</div>
      </div>
      <div class="three card">
        <h3>TOP HASHTAGS</h3>
        <div id="hashtags" class="asset-grid"></div>
      </div>
      <div class="three card">
        <h3>CULTURAL MOMENTS</h3>
        <div id="moments" class="asset-grid"></div>
      </div>
      <div class="full card">
        <h3>COMPETITORS — SHARE OF VOICE & ENGAGEMENT</h3>
        <div id="comp-voice" class="asset-grid"></div>
      </div>
      <div class="full card">
        <h3>DEBUG / RAW</h3>
        <pre id="intel-debug" class="meta"></pre>
      </div>
    </section>

    <!-- ASSETS -->
    <section id="tab-assets" class="grid hidden">
      <div class="full card">
        <div class="row" style="justify-content:space-between;">
          <h3>ASSET LIBRARY</h3>
          <a class="btn" href="/api/assets" target="_blank"><i class="fa fa-arrow-up-right-from-square"></i>Open JSON</a>
        </div>
        <div id="asset-grid" class="asset-grid"></div>
      </div>
    </section>

    <!-- CALENDAR -->
    <section id="tab-calendar" class="grid hidden">
      <div class="full card">
        <div class="row" style="justify-content:space-between;">
          <h3>STRATEGIC CALENDAR</h3>
          <div class="view-switch">
            <button class="active" data-view="7_day_view">7 DAY</button>
            <button data-view="30_day_view">30</button>
            <button data-view="60_day_view">60</button>
            <button data-view="90_day_view">90</button>
          </div>
        </div>
        <div id="calendar-events" class="asset-grid"></div>
      </div>
    </section>

    <!-- AGENCY -->
    <section id="tab-agency" class="grid hidden">
      <div class="two card">
        <h3>PERFORMANCE</h3>
        <div id="agency-kpis" class="kbar"></div>
      </div>
      <div class="two card">
        <h3>PROJECTS</h3>
        <div id="agency-projects" class="asset-grid"></div>
      </div>
      <div class="full card">
        <h3>DELIVERABLES</h3>
        <div id="agency-deliverables" class="asset-grid"></div>
      </div>
    </section>

    <!-- UPLOAD -->
    <section id="tab-upload" class="grid hidden">
      <div class="full card">
        <h3>UPLOADS</h3>
        <div id="drop" class="upload">
          <p class="muted">Drag & drop, or click to browse. Images / videos / docs up to 100MB.</p>
          <input id="picker" type="file" multiple accept="image/*,video/*,.jsonl,.pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.csv,.txt" style="display:none" />
          <button id="browse" class="btn"><i class="fa fa-folder-open"></i>Browse Files</button>
        </div>
        <div class="progress" style="margin-top:12px;"><span id="bar"></span></div>
        <div id="upload-log" class="meta" style="margin-top:8px;"></div>
        <div id="uploaded" class="asset-grid" style="margin-top:12px;"></div>
      </div>
    </section>
  </div>

  <script src="/static/js/app.js?v=ccv2-20250923-frontend-recover"></script>
</body>
</html>
